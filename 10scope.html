<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>자바스크립트 scope</title>
</head>
<body>
<h1>자바스크립트 scope</h1>
<hr>
<h2>개요</h2>
<p>변수가 사용될 수 있는 범위를 scope라고 함</p>
<p><b>global scope</b>: 선언된 변수는 어느 곳에서든 접근 가능 ex) LAPD, NYPD</p>
<p><b>local scope</b>: 선언된 변수는 선언된 영역에서만 접근 가능 ex) FBI</p>
<p><b>function scope</b>: 함수에 선언된 변수는 함수내에서만 접근 가능</p>

<script>
  var a = '123';  // 전역 scope

  { // 코드블록
    document.write(a, '<br>');
  }

  {
    document.write(a, '<br>');
  }

  let b = () => document.write(a, '<br>');
  b();
</script>

<script>
  let c = '456';  // 전역 scope

  {
    document.write(c, '<br>');
  }

  {
    document.write(c, '<br>');
  }
</script>

<script>
  {
    let d = '789';  // 지역 scope
    document.write(d, '<br>');
  }

  // {
  //   document.write(d, '<br>');  // d는 전역변수가 아니라서 출력안됨
  // }
</script>
<hr>

<h2>호이스팅</h2>
<p>변수나 함수를 어디서 어떻게 선언하더라도
항상 컨텍스트내 최상위로 끌고 올라온 뒤
undefined를 할당해두고 코드를 실행하는 것</p>
<p>var로 선언한 변수나 선언형 함수를 사용하는 경우 발생함</p>
<p>따라서, 변순선언시 let을 사용하고, 화살표 함수선언을
이용하면 호이스팅을 억제할 수 있다</p>
<script>
    // var e = undefined; () // 암묵적 전역
  {
    var e = '321';  // 지역 scope
    document.write(e, '<br>');
  }

  {
    // 호이스팅
    // 이 블록에서는 호출 불가!
    document.write(e, '<br>');
  }
</script>

<script>
    let f = 1;
    let g = 2;
    {
        let f = 3;
        {
            // document.write(f, '<br>'); // 에러 발생!
            let f = 4;
            document.write(f, '<br>');
            document.write(g, '<br>');
        }
        document.write(f, '<br>');
        document.write(g, '<br>');
    }
</script>

<script>
    function sayHello(){
        document.write(`Hello World!!<br>`);
    }
    sayHello();
</script>

<script>
    sayHello2();
    function sayHello2(){
        document.write(`Hoisting!!<br>`);
    }
</script>

<script>
    // 화살표 함수는 호이스팅되지 않음
    // sayHello3(); // 함수가 호이스팅되지 않아서 선언문 이전에 호출할 수 없다
    let sayHello3 = () => {
        document.write(`Arrow Function<br>`);
    }

    sayHello3();
</script>
</body>
</html>